<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zerody.user.mapper.StaffHistoryMapper">
    <select id="getHonorPunishmentWall" resultType="com.zerody.user.vo.StaffHistoryVo">
        select
            sh.type,
            count(sh.describe)as `dynamic`,
            sh.staff_id,
            ssi.user_name,
            date(sh.time)as `time`,
            sh.describe,
            i.image_url
        from staff_history sh
        join image i on sh.staff_id=i.connect_id
        join sys_staff_info ssi on sh.staff_id = ssi.id
        <where>
            where type = #{type} and staff_id = #{staffId}
        </where>
        group by time
        order by time desc
    </select>
</mapper>